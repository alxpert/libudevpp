////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2017 Dimitry Ishenko
// Contact: dimitry (dot) ishenko (at) (gee) mail (dot) com
//
// Distributed under the GNU GPL license. See the LICENSE.md file for details.

////////////////////////////////////////////////////////////////////////////////
#include "posix/error.hpp"
#include "udev/udev.hpp"

////////////////////////////////////////////////////////////////////////////////
namespace detail
{

// move udev stuff into detail namespace 8-o
#include <libudev.h>

}

////////////////////////////////////////////////////////////////////////////////
udev::udev::udev() : udev_(detail::udev_new())
{
    if(!udev_) throw posix::errno_error();
}

////////////////////////////////////////////////////////////////////////////////
udev::udev::~udev() noexcept { detail::udev_unref(udev_); }
